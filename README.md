<div align="center">

# ğŸ¦ bank-core

**ì˜ˆê¸ˆ ê³„ì¢Œ ê´€ë¦¬ ë° ëŒ€ì¶œ ê¸ˆë¦¬ ì‚°ì¶œ ì‹œìŠ¤í…œ**

ìˆ˜ì‹ (ì˜ˆê¸ˆ/ì†¡ê¸ˆ/ì´ì)ê³¼ ì—¬ì‹ (ê¸ˆë¦¬ ì‚°ì¶œ) í•µì‹¬ ì—…ë¬´ë¥¼ êµ¬í˜„í•˜ê³ ,<br/>
ë™ì‹œì„± í™˜ê²½ì—ì„œì˜ íŠ¸ëœì­ì…˜ ì •í•©ì„±ì„ ê²€ì¦í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

[![Kotlin](https://img.shields.io/badge/Kotlin-7F52FF?style=flat-square&logo=kotlin&logoColor=white)](https://kotlinlang.org/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot%203-6DB33F?style=flat-square&logo=springboot&logoColor=white)](https://spring.io/projects/spring-boot)
[![MySQL](https://img.shields.io/badge/MySQL%208.0-4479A1?style=flat-square&logo=mysql&logoColor=white)](https://www.mysql.com/)
[![Redis](https://img.shields.io/badge/Redis%207-DC382D?style=flat-square&logo=redis&logoColor=white)](https://redis.io/)
[![Kubernetes](https://img.shields.io/badge/Kubernetes-326CE5?style=flat-square&logo=kubernetes&logoColor=white)](https://kubernetes.io/)

</div>

---

## ğŸ“ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 EKS Cluster                  â”‚
â”‚                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  bank-core   â”‚     â”‚ interest-batch  â”‚   â”‚
â”‚   â”‚   API Pod    â”‚     â”‚    CronJob      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                      â”‚            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚      MySQL (StatefulSet + PVC)        â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚      Redis (ë¶„ì‚° ë½)                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

<table>
<tr>
<td width="33%" valign="top">

### ğŸ’° ìˆ˜ì‹  (Savings)
- ì˜ˆê¸ˆ ê³„ì¢Œ ê°œì„¤ / ì¡°íšŒ / í•´ì§€
- ê³„ì¢Œ ê°„ ì†¡ê¸ˆ (ë‹¨ì¼ íŠ¸ëœì­ì…˜)
- ì¼ë³„ ì´ì ê³„ì‚° ë°°ì¹˜
- ë‹¨ë¦¬ / ë³µë¦¬ / ì¤‘ë„í•´ì§€ ì´ì
- ë©±ë“±ì„± í‚¤ ê¸°ë°˜ ì¬ì²˜ë¦¬

</td>
<td width="33%" valign="top">

### ğŸ“Š ì—¬ì‹  (Loan)
- ê¸ˆë¦¬ ì‚°ì¶œ ì—”ì§„
  - ê¸°ì¤€ê¸ˆë¦¬
  - ê°€ì‚°ê¸ˆë¦¬
  - ìš°ëŒ€ê¸ˆë¦¬
- BigDecimal ì •ë°€ ê³„ì‚°
- ì›ë‹¨ìœ„ ì ˆì‚¬ ì²˜ë¦¬

</td>
<td width="33%" valign="top">

### ğŸ”’ íŠ¸ëœì­ì…˜ ì •í•©ì„±
- ë™ì‹œ ì†¡ê¸ˆ ì”ì•¡ ì¼ê´€ì„±
- ë¹„ê´€ì  ë½ (FOR UPDATE)
- ë‚™ê´€ì  ë½ (@Version)
- ë¶„ì‚° ë½ (Redis)
- ì „ëµë³„ TPS ë²¤ì¹˜ë§ˆí¬

</td>
</tr>
</table>

## ğŸ—‚ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
bank-core/
â”œâ”€â”€ app-api/            # REST API (ê³„ì¢Œ, ê¸ˆë¦¬, ì†¡ê¸ˆ)
â”œâ”€â”€ app-batch/          # ì´ì ê³„ì‚° ë°°ì¹˜
â”œâ”€â”€ domain/             # ì—”í‹°í‹°, ë¦¬í¬ì§€í† ë¦¬, ë„ë©”ì¸ ë¡œì§
â”œâ”€â”€ common/             # BigDecimal ìœ í‹¸, ê³µí†µ ì˜ˆì™¸
â”œâ”€â”€ infra/
â”‚   â””â”€â”€ k8s/            # Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ build.gradle.kts
```

## ğŸš€ ë¡œì»¬ ì‹¤í–‰

```bash
# 1. ì¸í”„ë¼ ì‹¤í–‰
docker-compose up -d

# 2. API ì„œë²„ ì‹¤í–‰
./gradlew :app-api:bootRun

# 3. í…ŒìŠ¤íŠ¸
./gradlew test
```

## ğŸ“¡ API

| Method | Endpoint | ì„¤ëª… |
|:------:|----------|------|
| `POST` | `/api/accounts` | ê³„ì¢Œ ê°œì„¤ |
| `GET` | `/api/accounts/{id}` | ê³„ì¢Œ ì¡°íšŒ |
| `POST` | `/api/accounts/{id}/close` | ê³„ì¢Œ í•´ì§€ |
| `POST` | `/api/transfers` | ì†¡ê¸ˆ |
| `GET` | `/api/accounts/{id}/transactions` | ê±°ë˜ ë‚´ì—­ ì¡°íšŒ |
| `POST` | `/api/rates/calculate` | ê¸ˆë¦¬ ì‚°ì¶œ |

## ğŸ“ˆ íŠ¸ëœì­ì…˜ ë²¤ì¹˜ë§ˆí¬

| ì „ëµ | TPS (req/s) | ì •í•©ì„± | ì¸¡ì • ì¡°ê±´ |
|:----:|:-----------:|:------:|-----------|
| ë¶„ì‚° ë½ (`DISTRIBUTED`) | 24.3 | âœ… | ë™ì¼ ê³„ì¢ŒìŒ 20ê±´ ë™ì‹œ ì†¡ê¸ˆ (`1000 â†’ 0`, `100`ì› ë‹¨ìœ„) |
| ë¹„ê´€ì  ë½ (`PESSIMISTIC`) | 74.1 | âœ… | ë™ì¼ ê³„ì¢ŒìŒ 20ê±´ ë™ì‹œ ì†¡ê¸ˆ (`1000 â†’ 0`, `100`ì› ë‹¨ìœ„) |
| ë‚™ê´€ì  ë½ (`@Version`) | ì¸¡ì • ì˜ˆì • | â³ | Phase 4-2/4-3ì—ì„œ ì¶©ëŒ ì •ì±…ê³¼ í•¨ê»˜ ì¸¡ì • ì˜ˆì • |

- ì¸¡ì • ì¼ì‹œ: 2026-02-21
- ì°¸ê³ : ë‚™ê´€ì  ë½(`@Version`)ì€ ì•„ì§ ì¸¡ì •í•˜ì§€ ì•Šì•„ ì „ëµ ê°„ ìµœì¢… ë¹„êµ ê²°ë¡ ì€ ë³´ë¥˜
- ì¸¡ì • ê¸°ì¤€: `TransferConcurrencyReproductionTest`, `TransferPessimisticLockIntegrationTest` ì‹¤í–‰ ê²°ê³¼ì˜ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì†Œìš” ì‹œê°„ ê¸°ì¤€(ì‹œë‚˜ë¦¬ì˜¤ ê´€ì¸¡ì¹˜, ì •ì‹ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì•„ë‹˜)

## ğŸ”€ ë¸Œëœì¹˜ ì „ëµ

```
main â† development â† feature/worktree
```

| ë¸Œëœì¹˜ | ìš©ë„ |
|--------|------|
| `main` | ë°°í¬ ê°€ëŠ¥í•œ ì•ˆì • ë²„ì „ |
| `development` | ê°œë°œ í†µí•© ë¸Œëœì¹˜ |
| `feature/*` | worktree ê¸°ë°˜ ê¸°ëŠ¥ ê°œë°œ |

## ğŸ› ï¸ ë°°í¬

```
GitHub Actions (OIDC) â†’ ECR â†’ EKS
```

```bash
# ìˆ˜ë™ ë°°í¬
kubectl apply -f infra/k8s/
```

---

<div align="center">

Made with â˜• by [@hyeongirlife](https://github.com/hyeongirlife)

</div>
